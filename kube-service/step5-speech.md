Давайте с вами посмотрим, как работает service Discovery, т.е. механизм обнаружения сервисов в Kubernetes. Для его работы необходим компонент, отвечающий за работу с DNS. В инсталляции Kubentes от катакоды этот компонент есть, он называется coredns.

Для демонстрации работы механизма обнаружения сервисов  нам нужен внешний, по отношению к нашему деплойменту, под. Это будет с под с образом busybox. busybox - это небольшой образ, в котором есть утилиты командной строки. Давайте его запустим в интерактивном режиме, с помощью команды kubectl run. 

**Запускаем команду.**

Мы находимся "внутри" пода. И можем совершать запросы с помощью утилиты wget.  

Поскольку *поды* находятся в одном пространстве имен, то можем обратиться к нашем приложению просто по доменному имени `{имя сервиса}`, т.е. в нашем случае `hello-service` :

**Запускаем команду** wget -qO hello-service 9000

Видим с вами ответ от одного из *подов* приложения. 

Также можем обратиться по доменному имени `{имя сервиса}.{имя неймспейса}`, в нашем случае это будет `hello-service.myapp`

**Запускаем команду.** 

И опять видим с вами ответ от одного из *подов* приложения. 

А также можем обратиться по полному доменному имени hello-service.myapp.svc.cluster.local :

**Запускаем команду.** 

И опять видим с вами ответ от одного из *подов* приложения. 

Чтобы выйти из интерактивного режима, нужно нажать **Ctrl-D**

Теперь можем удалить все объекты можно с помощью команды`kubectl delete -f service.yaml -f deployment.yaml`

**Запускаем команду** 

Итак, мы с вами разобрали основные команды по работе с сервисами в кубернетес, посмотрели как работают основные типы сервисов и service discovery. 