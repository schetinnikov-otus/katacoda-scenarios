Конфигурация и состояние кластера **Kubernetes** разбиты на небольшие описания - ***объекты*** различных типов. Каждый **объект** описывает какой-то отдельный аспект кластера, например, запущенный инстанс сервиса или ноду кластера. 

Все ***объекты*** хранятся в хранилище **etcd**  и каждый ***объект*** хранится в отдельном ключе **etcd**. 

Для работы с объектами в **API Server**-е используется **REST** подход. Т.е. каждому *объекту* соответствует ресурс в **API**. Для создания ресурса мы должны сделать **POST** запрос на **URL** коллекции, для получения ресурса **GET** на **URL** конкретного ресурса, для изменения - **PATCH**, а удаления - **DELETE**.  

Запрос, который мы с вами делали для того, чтобы запустить контейнер в кластере, это был запрос на создание ресурса **pod**. А в тело запроса передавался *объект* типа **Pod**. *Объект* типа **Pod** является описанием простейшей рабочей нагрузки. Давайте посмотрим на тело запроса, которое хранилось в файле `hello-service.json`.

`cat ./hello-service.json | jq `{{execute T1}}

Как и у любого объекта у объекта типа **Pod** есть атрибуты: **apiVersion**, **metadata**, **spec**.



## Получение объекта

Также мы можем получить информацию о нашем *объекте* с помощью **GET** запроса к ресурсу **pod** по его имени:

`curl -s 127.0.0.1:8080/api/v1/namespaces/default/pods/hello-demo | jq`{{execute T1}}

Как видим там содержится много информации, в том числе и атрибут - **status**, который отражает текущий статус *объекта*.

Можно посмотреть, как эта же информация хранится в **etcd**:

`docker exec -it $ETCD_DOCKER_ID etcdctl get /registry/pods/default/hello-demo  --cacert /etc/kubernetes/pki/etcd/ca.crt --cert /etc/kubernetes/pki/etcd/peer.crt  --key /etc/kubernetes/pki/etcd/peer.key`{{execute T1}}

`clear`{{execute T1}} `clear`{{execute T2}}

## Удаление объекта 

Мы можем удалить ресурс с помощью **DELETE** метода, что полностью соответствует **REST** подходу.

`curl -X DELETE 127.0.0.1:8080/api/v1/namespaces/default/pods/hello-demo`{{execute T1}}

Когда мы так сделаем, то должно пройти какое-то время для удаления *объекта*. И через некоторое время (обычно не больше 1 минуты) **GET** запрос будет уже выдавать **404**-ую ошибку:

`curl 127.0.0.1:8080/api/v1/namespaces/default/pods/hello-demo | jq`{{execute T1}}

B третьем терминале мы увидим событии о том, что контейнер был остановлен **kubelet**-ом

```
{
"message": "Stopping container hello-demo",
"component": "kubelet"
}
```

А контейнер будет потушен:

`docker ps | grep -v pause | grep hello`{{execute T2}}

`clear`{{execute T1}} `clear`{{execute T2}}
